<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your SpotOrigin Profile</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617; /* Slate 950 */
            color: #F8FAFC;
        }
        .calm-background {
            position: absolute;
            inset: 0;
            background-image: radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.2) 0%, transparent 40%),
                              radial-gradient(circle at 80% 70%, rgba(139, 92, 246, 0.15) 0%, transparent 50%);
        }
        .drag-over {
            border-color: #6366F1;
            background-color: #1E293B;
        }
    </style>
</head>
<body class="antialiased">

    <header class="absolute top-0 left-0 right-0 z-20">
        <nav class="container mx-auto px-6 py-6">
            <div class="text-2xl font-bold tracking-tighter">SpotOrigin</div>
        </nav>
    </header>

    <main class="relative min-h-screen flex items-center justify-center py-24 px-4">
        <div class="calm-background"></div>

        <div class="relative z-10 w-full max-w-2xl">
            <div class="bg-slate-900/70 backdrop-blur-xl border border-slate-700 rounded-2xl p-8 sm:p-12">
                <div class="text-center mb-8">
                    <h1 class="text-3xl md:text-4xl font-extrabold tracking-tighter mb-2">Complete Your Private Profile</h1>
                    <p class="text-lg text-slate-400">Your information is confidential and only shared with vetted agents when a potential match is found.</p>
                </div>
                
                <form action="https://formspree.io/f/xblzqllb" method="POST" enctype="multipart/form-data" class="space-y-4">
                    <input type="hidden" name="_autoresponse" value="Your SpotOrigin Application has been received!">
                    <input type="hidden" id="referrer-desktop" name="referrer_email">
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="name-desktop" class="block text-sm font-medium text-slate-300 mb-1">Full Name</label>
                            <input type="text" name="name" id="name-desktop" required class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500">
                        </div>
                        <div>
                            <label for="email-desktop" class="block text-sm font-medium text-slate-300 mb-1">Email Address</label>
                            <input type="email" name="email" id="email-desktop" required class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500">
                        </div>
                    </div>
                    <div>
                        <label for="experience-years" class="block text-sm font-medium text-slate-300 mb-1">Years of Professional Experience</label>
                        <select id="experience-years" name="experience_years" required class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white appearance-none bg-no-repeat bg-right pr-8" style="background-image: url('data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 20 20%27%3e%3cpath stroke=%27%2394a3b8%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%271.5%27 d=%27M6 8l4 4 4-4%27/%3e%3c/svg%3e'); background-position: right 0.5rem center; background-size: 1.5em 1.5em;">
                            <option value="">Select a range</option>
                            <option value="0-2 years">0-2 years</option>
                            <option value="3-5 years">3-5 years</option>
                            <option value="6-10 years">6-10 years</option>
                            <option value="11-15 years">11-15 years</option>
                            <option value="15+ years">15+ years</option>
                        </select>
                    </div>
                    <div>
                        <label for="location-input" class="block text-sm font-medium text-slate-300 mb-1">Desired Locations (e.g., Remote, New York, London)</label>
                        <input type="text" id="location-input" placeholder="Type a location and press Enter..." class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500">
                        <div id="locations-container" class="flex flex-wrap gap-2 mt-3"></div>
                        <input type="hidden" name="desired_locations" id="desired-locations-hidden">
                    </div>
                    <div>
                        <label for="last-compensation" class="block text-sm font-medium text-slate-300 mb-1">Last Compensation (Optional)</label>
                        <input type="text" name="last_compensation" id="last-compensation" placeholder="e.g., $120,000/year or $75/hour" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">Upload Your Resume</label>
                        <div id="resume-dropzone" class="relative flex justify-center rounded-lg border-2 border-dashed border-slate-600 px-6 py-10 transition-colors">
                            <div class="text-center">
                                <svg class="mx-auto h-12 w-12 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" /></svg>
                                <div id="file-name-display" class="mt-4 flex text-sm leading-6 text-slate-400">
                                    <label for="resume-desktop" class="relative cursor-pointer rounded-md font-semibold text-indigo-400 hover:text-indigo-300"><span>Upload a file</span><input id="resume-desktop" name="resume" type="file" required class="sr-only"></label>
                                    <p class="pl-1">or drag and drop</p>
                                </div>
                                <p class="text-xs leading-5 text-slate-500">PDF, DOC, DOCX up to 10MB</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-start pt-2">
                        <div class="flex items-center h-5">
                            <input id="terms-desktop" name="terms-candidate" type="checkbox" required class="h-4 w-4 text-indigo-600 border-slate-600 bg-slate-700 rounded">
                        </div>
                        <div class="ml-3 text-sm">
                            <label for="terms-desktop" class="text-slate-400">I agree to the <a href="terms.html" target="_blank" class="font-medium text-indigo-400 hover:text-indigo-300 underline">Terms of Service</a> and <a href="privacy.html" target="_blank" class="font-medium text-indigo-400 hover:text-indigo-300 underline">Privacy Policy</a>.</label>
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-4 px-6 rounded-full !mt-8 text-lg hover:bg-indigo-700 hover:scale-105 transition-all duration-300">Submit Application</button>
                </form>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- REFERRAL CODE LOGIC ---
            const urlParams = new URLSearchParams(window.location.search);
            const referrer = urlParams.get('ref');
            if (referrer) {
                const referrerDesktopInput = document.getElementById('referrer-desktop');
                if (referrerDesktopInput) referrerDesktopInput.value = referrer;
            }

            // --- LOCATION TAGS LOGIC ---
            const locationInput = document.getElementById('location-input');
            const locationsContainer = document.getElementById('locations-container');
            const hiddenLocationsInput = document.getElementById('desired-locations-hidden');
            let locations = [];

            const renderLocations = () => {
                if (!locationsContainer) return;
                locationsContainer.innerHTML = '';
                locations.forEach(location => {
                    const tag = document.createElement('span');
                    tag.className = 'bg-slate-700 text-slate-200 text-sm font-medium px-3 py-1 rounded-full flex items-center gap-2';
                    tag.textContent = location;
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.type = 'button';
                    removeBtn.className = 'text-slate-400 hover:text-white font-bold pl-1';
                    removeBtn.innerHTML = '&times;';
                    removeBtn.onclick = () => {
                        locations = locations.filter(l => l !== location);
                        hiddenLocationsInput.value = locations.join(', ');
                        renderLocations();
                    };
                    
                    tag.appendChild(removeBtn);
                    locationsContainer.appendChild(tag);
                });
            };

            const addLocation = () => {
                if (!locationInput) return;
                const newLocation = locationInput.value.replace(/,/g, '').trim();
                if (newLocation && !locations.includes(newLocation)) {
                    locations.push(newLocation);
                    hiddenLocationsInput.value = locations.join(', ');
                    renderLocations();
                }
                locationInput.value = '';
            };

            if(hiddenLocationsInput) {
                locations = ['Remote'];
                hiddenLocationsInput.value = locations.join(', ');
                renderLocations();
            }

            if(locationInput) {
                locationInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ',') {
                        e.preventDefault();
                        addLocation();
                    }
                });
                locationInput.addEventListener('blur', addLocation);
            }
            
            // --- DRAG-AND-DROP RESUME LOGIC ---
            const dropzone = document.getElementById('resume-dropzone');
            const fileInput = document.getElementById('resume-desktop');
            const fileNameDisplay = document.getElementById('file-name-display');
            if (dropzone && fileInput && fileNameDisplay) {
                const originalDropzoneContent = fileNameDisplay.innerHTML;

                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropzone.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
                    document.body.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
                });

                dropzone.addEventListener('dragover', () => dropzone.classList.add('drag-over'));
                dropzone.addEventListener('dragenter', () => dropzone.classList.add('drag-over'));
                dropzone.addEventListener('dragleave', () => dropzone.classList.remove('drag-over'));
                dropzone.addEventListener('drop', () => dropzone.classList.remove('drag-over'));

                dropzone.addEventListener('drop', (e) => {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    if (files.length > 0) {
                        fileInput.files = files;
                        updateFileName(files[0]);
                    }
                });
                
                fileInput.addEventListener('change', (e) => {
                    const files = e.target.files;
                    if (files.length > 0) {
                        updateFileName(files[0]);
                    }
                });

                const updateFileName = (file) => {
                    if (file) {
                        fileNameDisplay.innerHTML = `<span class="text-slate-200">${file.name}</span>`;
                    } else {
                         fileNameDisplay.innerHTML = originalDropzoneContent;
                    }
                }
            }
        });
    </script>

</body>
</html>