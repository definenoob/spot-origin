<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpotOrigin - Interactive Simulation (v7 - Star Economy)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <style>
        /* --- Base & Reset --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212; /* Dark background */
            color: #e0e0e0;
            line-height: 1.6;
        }

        /* --- Page Layout --- */
        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* --- Header --- */
        .page-header {
            background-color: #1a1a1a;
            border-bottom: 1px solid #2a2a2a;
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .page-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-weight: 700;
            font-size: 22px;
            display: flex;
            align-items: center;
            color: #fff;
        }

        .logo .material-icons-outlined {
            color: #007AFF; /* SpotOrigin blue */
            font-size: 28px;
            margin-right: 8px;
        }

        .simulation-tag {
            font-size: 12px;
            font-weight: 600;
            background-color: #3a3a3a;
            color: #c0c0c0;
            padding: 4px 10px;
            border-radius: 15px;
            margin-left: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        nav {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        nav a {
            text-decoration: none;
            color: #a0a0a0;
            font-weight: 500;
            font-size: 15px;
            transition: color 0.2s ease;
            cursor: pointer;
        }

        nav a:hover {
            color: #fff;
        }

        nav a.active {
            color: #007AFF;
            font-weight: 600;
        }

        .invite-button {
            background-color: #007AFF;
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .invite-button:hover {
            background-color: #0056b3;
        }

        /* --- Main Content (Page Wrapper) --- */
        main {
            padding: 40px 0;
        }

        /* --- Info Blurb --- */
        .info-blurb {
            background-color: rgba(0, 122, 255, 0.1); 
            border: 1px solid rgba(0, 122, 255, 0.4);
            border-radius: 12px;
            padding: 20px 24px;
            margin-bottom: 32px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
            color: #e0e0e0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .info-blurb .icon {
            font-size: 28px;
            color: #007AFF;
            margin-top: 4px;
        }

        .info-blurb-content {
            flex-grow: 1;
        }

        .info-blurb h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #fff;
        }

        .info-blurb p {
            font-size: 15px;
            color: #c0c0c0;
            margin-bottom: 10px;
        }
        
        .info-blurb p:last-child {
            margin-bottom: 0;
        }
        
        .info-blurb strong {
            color: #fff;
        }


        /* Hide pages by default */
        .page-content {
            display: none;
        }

        /* --- Filter Bar --- */
        .filter-bar {
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            align-items: center;
            margin-bottom: 32px;
        }

        .filter-bar h1 {
            font-size: 28px;
            font-weight: 700;
            color: #fff;
            margin-right: 24px;
        }

        .search-input {
            display: flex;
            align-items: center;
            background-color: #2a2a2a;
            border-radius: 8px;
            padding: 0 12px;
            flex-grow: 1;
        }
        
        .search-input .material-icons-outlined {
            color: #707070;
            font-size: 22px;
        }

        .search-input input {
            background: none;
            border: none;
            outline: none;
            color: #fff;
            padding: 12px 10px;
            font-size: 15px;
            width: 100%;
        }

        .filter-group select {
            background-color: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid #3a3a3a;
            border-radius: 8px;
            padding: 12px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23707070' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 1em;
            padding-right: 36px; /* Space for arrow */
        }
        
        /* --- Empty Pipeline State --- */
        .empty-pipeline {
            text-align: center;
            padding: 80px 20px;
            background-color: #1a1a1a;
            border: 1px dashed #2a2a2a;
            border-radius: 12px;
        }
        
        .empty-pipeline .material-icons-outlined {
            font-size: 48px;
            color: #007AFF;
            margin-bottom: 16px;
        }
        
        .empty-pipeline h2 {
            font-size: 22px;
            color: #fff;
            margin-bottom: 8px;
        }
        
        .empty-pipeline p {
            font-size: 16px;
            color: #a0a0a0;
        }

        /* --- Agent Grid --- */
        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .agent-card {
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .agent-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border-color: #3a3a3a;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
        }

        .profile-pic {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #333;
        }

        .header-info {
            flex-grow: 1;
        }

        .header-info h3 {
            font-size: 20px;
            font-weight: 600;
            color: #fff;
        }

        .header-info .yoe {
            font-size: 15px;
            color: #a0a0a0;
        }
        
        /* Star Count Styling and Animation */
        .star-count {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 16px;
            font-weight: 600;
            color: #FFD60A; /* Star yellow */
            background-color: #2a2a2a;
            padding: 6px 10px;
            border-radius: 20px;
            user-select: none; /* Prevent text selection on click */
            transition: transform 0.2s ease-out; /* Animation for feedback */
        }

        /* Visual 'pop' effect when star count updates */
        .star-count.pop {
            transform: scale(1.15);
        }
        
        .star-count .material-icons-outlined {
            font-size: 20px;
        }
        
        /* Wrapper for the number for easier JS targeting and layout */
        .star-count .number {
             min-width: 1.2em; /* Ensures space for 2 digits */
             text-align: center;
        }

        .card-body {
            padding: 0 20px 20px 20px;
            font-size: 14px;
            color: #c0c0c0;
        }
        
        .card-body p {
            margin-bottom: 12px;
        }
        
        .card-body strong {
            color: #e0e0e0;
            font-weight: 500;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
        }

        .tag {
            background-color: #2c2c2e;
            color: #c0c0c0;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: 500;
        }
        
        .open-to {
            list-style: none;
            margin-top: 8px;
            padding: 0;
        }
        
        .open-to li {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        
        .open-to .material-icons-outlined {
            color: #34C759; /* Green check */
            font-size: 18px;
        }

        .card-footer {
            margin-top: auto; /* Pushes footer to bottom */
            border-top: 1px solid #2a2a2a;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #1f1f1f;
        }
        
        .invited-by {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #707070;
        }

        .invited-by .material-icons-outlined {
            font-size: 18px;
            color: #34C759;
        }

        .card-actions {
            display: flex;
            gap: 12px;
        }

        .action-button {
            border: none;
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .action-button .material-icons-outlined {
            font-size: 18px;
        }

        /* --- Button States --- */
        .btn-star {
            background-color: #2c2c2e;
            color: #a0a0a0;
        }
        
        .btn-star:hover {
            background-color: #3a3a3a;
            color: #fff;
        }
        
        /* Starred button on BROWSE page (disabled) */
        .btn-star.starred-on-browse {
            background-color: #2a2a2a;
            color: #FFD60A;
            cursor: not-allowed;
        }

        /* Email button (locked) */
        .btn-email {
            background-color: #2c2c2e;
            color: #a0a0a0;
            min-width: 100px; /* Give it space to change text */
            justify-content: center;
        }
        
        .btn-email:hover {
            background-color: #3a3a3a;
        }

        /* Email button (unlocked) */
        .btn-email.unlocked {
            background-color: #007AFF;
            color: #fff;
        }
        
        .btn-email.unlocked:hover {
            background-color: #0056b3;
        }
        
        .btn-email .text {
            margin: 0 4px;
        }
        
        /* Unstar button on PIPELINE page */
        .btn-unstar {
            background-color: #4a2c2c;
            color: #ff8a8a;
        }
        .btn-unstar:hover {
            background-color: #5f3a3a;
            color: #fff;
        }

    </style>
</head>
<body>

    <header class="page-header">
        <div class="container">
            <div class="logo">
                <span class="material-icons-outlined">all_inclusive</span>
                SpotOrigin
                <span class="simulation-tag">Simulation</span>
            </div>
            <nav>
                <a id="nav-browse" class="active">Browse Agents</a>
                <a id="nav-pipeline">My Pipeline</a>
                <a id="nav-profile">My Profile</a>
                <button class="invite-button">Invite New Agent</button>
            </nav>
        </div>
    </header>

    <main>

        <div class="container">
            <div class="info-blurb">
                <span class="material-icons-outlined icon">tips_and_updates</span>
                <div class="info-blurb-content">
                    <h3>The SpotOrigin Trust Economy</h3>
                    <p>
                        Welcome to the simulation. SpotOrigin is a <strong>strictly invite-only</strong> network where trust is the currency.
                    </p>
                    <p>
                        To access a recruiter's contact details, you must "Star" them. This action unlocks their email, adds them to your pipeline, and increases their star count, signaling your intent to collaborate. When you invite other recruiters, you vouch for them and they vouch for you, enhancing everyone's credibility within the community.
                    </p>
                </div>
            </div>
        </div>
        
        <div id="page-browse" class="page-content" style="display: block;">
            <div class="container">
                <section class="filter-bar">
                    <h1>Browse Agents</h1>
                    <div class="search-input">
                        <span class="material-icons-outlined">search</span>
                        <input type="text" id="filter-search" placeholder="Search by name, skill, or keyword (e.g. 'SaaS', 'React', 'Go')">
                    </div>
                    <div class="filter-group">
                        <select id="filter-yoe">
                            <option value="">Years of Exp (Any)</option>
                            <option value="1-3">1-3 YOE</option>
                            <option value="4-7">4-7 YOE</option>
                            <option value="8+">8+ YOE</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <select id="filter-open-to">
                            <option value="">Open to... (Any)</option>
                            <option value="providingCandidates">Providing Candidates</option>
                            <option value="receivingCandidates">Receiving Candidates</option>
                            <option value="providingClients">Providing Clients</option>
                            <option value="receivingClients">Receiving Clients</option>
                        </select>
                    </div>
                </section>

                <section class="agent-grid" id="browse-grid">

                    <article class="agent-card" 
                        data-agent-id="jane-doe" 
                        data-yoe="8"
                        data-initial-stars="15"
                        data-open-providing-candidates="true"
                        data-open-receiving-candidates="true"
                        data-open-providing-clients="false"
                        data-open-receiving-clients="false"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1573496359112-58A97a4B3f90?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHwxfHxwcm9mZXNzaW9uYWwlMjB3b21hbiUyMGhlYWRzaG90fGVufDB8fHx8MTY4MTM5NzgwMnww&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of Jane Doe" class="profile-pic">
                            <div class="header-info">
                                <h3>Jane Doe</h3>
                                <p class="yoe">8 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">15</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Top tech recruiter specializing in Series A startups and engineering leadership.</p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">SaaS</span>
                                    <span class="tag">AI/ML</span>
                                    <span class="tag">FinTech</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Candidates</li>
                                    <li><span class="material-icons-outlined">check_circle</span> Receiving Candidates</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                            <div class="invited-by" title="This agent was invited by Elliott D.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: Elliott D.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="jane.doe@email.com">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>

                    <article class="agent-card" 
                        data-agent-id="john-smith" 
                        data-yoe="6"
                        data-initial-stars="9"
                        data-open-providing-candidates="true"
                        data-open-receiving-candidates="false"
                        data-open-providing-clients="true"
                        data-open-receiving-clients="false"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1568602471122-7832951cc4c5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHwyfHxwcm9mZXNzaW9uYWwlMjBtYW4lMjBoZWFkc2hvdHxlbnwwfHx8fDE2ODEzOTc4NDV8MA&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of John Smith" class="profile-pic">
                            <div class="header-info">
                                <h3>John Smith</h3>
                                <p class="yoe">6 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">9</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Expert in healthcare and pharma placements, with a strong network of pre-vetted candidates.</p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">Healthcare</span>
                                    <span class="tag">Pharma</span>
                                    <span class="tag">Biotech</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Candidates</li>
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Clients</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                             <div class="invited-by" title="This agent was invited by Jane D.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: Jane D.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="j.smith@email.com">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>

                    <article class="agent-card" 
                        data-agent-id="emily-white" 
                        data-yoe="3"
                        data-initial-stars="4"
                        data-open-providing-candidates="false"
                        data-open-receiving-candidates="true"
                        data-open-providing-clients="false"
                        data-open-receiving-clients="true"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHw0fHxwZXJzb24lMjBoZWFkc2hvdHxlbnwwfHx8fDE2ODEzOTc4NzN8MA&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of Emily White" class="profile-pic">
                            <div class="header-info">
                                <h3>Emily White</h3>
                                <p class="yoe">3 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">4</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Rising star in digital & creative recruiting. Always looking for split-desk partners.</p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">Creative</span>
                                    <span class="tag">Digital Marketing</span>
                                    <span class="tag">UI/UX</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Receiving Candidates</li>
                                    <li><span class="material-icons-outlined">check_circle</span> Receiving Clients</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                             <div class="invited-by" title="This agent was invited by John S.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: John S.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="em.white@design.co">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>
                    
                    <article class="agent-card" 
                        data-agent-id="michael-brown" 
                        data-yoe="12"
                        data-initial-stars="28"
                        data-open-providing-candidates="false"
                        data-open-receiving-candidates="false"
                        data-open-providing-clients="true"
                        data-open-receiving-clients="false"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHw3fHxwZXJzb24lMjBoZWFkc2hvdHxlbnwwfHx8fDE2ODEzOTc4NzN8MA&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of Michael Brown" class="profile-pic">
                            <div class="header-info">
                                <h3>Michael Brown</h3>
                                <p class="yoe">12 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">28</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Veteran recruiter focused on C-suite and executive roles. My network is my bond.</p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">Executive Search</span>
                                    <span class="tag">C-Suite</span>
                                    <span class="tag">Leadership</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Clients</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                             <div class="invited-by" title="This agent was invited by Elliott D.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: Elliott D.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="m.brown@exec.com">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>
                    
                    <article class="agent-card" 
                        data-agent-id="sarah-chen" 
                        data-yoe="5"
                        data-initial-stars="7"
                        data-open-providing-candidates="true"
                        data-open-receiving-candidates="true"
                        data-open-providing-clients="false"
                        data-open-receiving-clients="false"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHw1fHxwcm9mZXNzaW9uYWwlMjB3b21hbiUyMGhlYWRzaG90fGVufDB8fHx8MTY4MTM5NzgwMnww&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of Sarah Chen" class="profile-pic">
                            <div class="header-info">
                                <h3>Sarah Chen</h3>
                                <p class="yoe">5 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">7</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Full-stack engineering recruiter. Deep network in React, Node, and Python ecosystems.</p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">Software Engineering</span>
                                    <span class="tag">JavaScript</span>
                                    <span class="tag">Python</span>
                                    <span class="tag">React</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Candidates</li>
                                    <li><span class="material-icons-outlined">check_circle</span> Receiving Candidates</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                             <div class="invited-by" title="This agent was invited by Jane D.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: Jane D.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="sarah.chen@tech.io">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>
                    
                    <article class="agent-card" 
                        data-agent-id="david-lee" 
                        data-yoe="7"
                        data-initial-stars="11"
                        data-open-providing-candidates="true"
                        data-open-receiving-candidates="false"
                        data-open-providing-clients="false"
                        data-open-receiving-clients="true"
                    >
                        <div class="card-header">
                            <img src="https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w0NTYyMDF8MHwxfHNlYXJjaHw5fHxwcm9mZXNzaW9uYWwlMjBtYW4lMjBoZWFkc2hvdHxlbnwwfHx8fDE2ODEzOTc4NDV8MA&ixlib=rb-4.0.3&q=80&w=200" alt="Profile of David Lee" class="profile-pic">
                            <div class="header-info">
                                <h3>David Lee</h3>
                                <p class="yoe">7 YOE</p>
                            </div>
                            <div class="star-count">
                                <span class="material-icons-outlined">star</span>
                                <span class="number">11</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p><strong>Bio:</strong> Focused on Product Management and GTM roles for B2B SaaS companies. </p>
                            <p><strong>Specializations:</strong>
                                <span class="tags">
                                    <span class="tag">Product Management</span>
                                    <span class="tag">Marketing</span>
                                    <span class="tag">B2B SaaS</span>
                                    <span class="tag">Go</span>
                                </span>
                            </p>
                            <p><strong>Open to:</strong>
                                <ul class="open-to">
                                    <li><span class="material-icons-outlined">check_circle</span> Providing Candidates</li>
                                    <li><span class="material-icons-outlined">check_circle</span> Receiving Clients</li>
                                </ul>
                            </p>
                        </div>
                        <div class="card-footer">
                             <div class="invited-by" title="This agent was invited by Michael B.">
                                <span class="material-icons-outlined">how_to_reg</span>
                                Invited by: Michael B.
                            </div>
                            <div class="card-actions">
                                <button class="action-button btn-star">
                                    <span class="material-icons-outlined">star_border</span>
                                    <span class="text">Star</span>
                                </button>
                                <button class="action-button btn-email" data-email="david.lee@pm.org">
                                    <span class="material-icons-outlined">lock</span>
                                    <span class="text">Email</span>
                                </button>
                            </div>
                        </div>
                    </article>

                </section>
            </div>
        </div>
        
        <div id="page-pipeline" class="page-content">
            <div class="container">
                <div class="filter-bar">
                    <h1>My Pipeline</h1>
                </div>
                
                <section class="agent-grid" id="pipeline-grid">
                    </section>
                
                <section id="empty-pipeline-message" style="display: none;">
                    <div class="empty-pipeline">
                        <span class="material-icons-outlined">person_add</span>
                        <h2>Your Pipeline is Empty</h2>
                        <p>Go to the "Browse Agents" page to find partners and add them to your pipeline.</p>
                    </div>
                </section>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- STATE MANAGEMENT ---
            // We use two storage mechanisms for the simulation:
            // 1. Who the current user has starred (their pipeline).
            // 2. The persistent, simulated total star counts for all agents.
            
            const STORAGE_KEY_STARRED = 'spotorigin_starred_agents_v7';
            const STORAGE_KEY_COUNTS = 'spotorigin_agent_counts_v7';
            
            // 1. Load which agents THIS user has starred (List of IDs)
            let starredAgents = JSON.parse(localStorage.getItem(STORAGE_KEY_STARRED)) || [];
            
            // 2. Load the simulated total counts for ALL agents (Object: {agentId: count})
            let agentStarCounts = JSON.parse(localStorage.getItem(STORAGE_KEY_COUNTS)) || {};

            function saveState() {
                localStorage.setItem(STORAGE_KEY_STARRED, JSON.stringify(starredAgents));
                localStorage.setItem(STORAGE_KEY_COUNTS, JSON.stringify(agentStarCounts));
            }

            // --- PAGE ELEMENTS ---
            const pageBrowse = document.getElementById('page-browse');
            const pagePipeline = document.getElementById('page-pipeline');
            const navBrowse = document.getElementById('nav-browse');
            const navPipeline = document.getElementById('nav-pipeline');
            const pipelineGrid = document.getElementById('pipeline-grid');
            const emptyPipelineMessage = document.getElementById('empty-pipeline-message');
            
            // --- FILTER ELEMENTS ---
            const filterSearchInput = document.getElementById('filter-search');
            const filterYoeSelect = document.getElementById('filter-yoe');
            const filterOpenToSelect = document.getElementById('filter-open-to');
            const browseGrid = document.getElementById('browse-grid');
            const allAgentCards = Array.from(browseGrid.querySelectorAll('.agent-card'));

            // --- NAVIGATION ---
            navBrowse.addEventListener('click', (e) => {
                e.preventDefault();
                showBrowsePage();
            });

            navPipeline.addEventListener('click', (e) => {
                e.preventDefault();
                showPipelinePage();
            });

            function showBrowsePage() {
                pagePipeline.style.display = 'none';
                pageBrowse.style.display = 'block';
                navPipeline.classList.remove('active');
                navBrowse.classList.add('active');
                refreshBrowsePageUI();
            }

            function showPipelinePage() {
                pageBrowse.style.display = 'none';
                pagePipeline.style.display = 'block';
                navBrowse.classList.remove('active');
                navPipeline.classList.add('active');
                refreshPipelinePageUI();
            }
            
            // --- INITIALIZATION & COUNT MANAGEMENT ---
            
            function initializeAgentData() {
                allAgentCards.forEach(card => {
                    const agentId = card.dataset.agentId;
                    const starButton = card.querySelector('.btn-star');

                    // Initialize counts if not already in localStorage (first load)
                    if (agentStarCounts[agentId] === undefined) {
                        // Use the data attribute for initial value
                        const initialCount = parseInt(card.dataset.initialStars, 10) || 0;
                        agentStarCounts[agentId] = initialCount;
                    }
                    
                    // Add star click listener
                    starButton.addEventListener('click', () => {
                        // Ensure the user hasn't already starred this agent
                        if (!starredAgents.includes(agentId)) {
                            starAgent(agentId, card);
                        }
                    });
                });
                saveState(); // Save initial counts if they were just created
            }

            // Helper function to update the visual star count on a card
            function updateStarCountDisplay(card, newCount, animate = false) {
                const countContainer = card.querySelector('.star-count');
                const countElement = card.querySelector('.star-count .number');
                if (countElement) {
                    countElement.textContent = newCount;
                }
                
                // Add visual feedback (animation)
                if (animate && countContainer) {
                     // Remove class and force reflow to ensure animation restarts if clicked rapidly
                    countContainer.classList.remove('pop');
                    void countContainer.offsetWidth; 
                    countContainer.classList.add('pop');
                    
                    // Remove the class after the animation duration (defined in CSS as 0.2s)
                    setTimeout(() => {
                        countContainer.classList.remove('pop');
                    }, 200);
                }
            }

            
            // --- BROWSE PAGE LOGIC (Starring) ---
            
            function refreshBrowsePageUI() {
                allAgentCards.forEach(card => {
                    const agentId = card.dataset.agentId;
                    
                    // Ensure the count is up-to-date based on the persisted state
                    updateStarCountDisplay(card, agentStarCounts[agentId]);

                    // Update button states based on if the user has starred them
                    if (starredAgents.includes(agentId)) {
                        setCardAsStarred(card);
                    } else {
                        setCardAsUnstarred(card);
                    }
                });
            }

            function starAgent(agentId, card) {
                // 1. Update user's starred list
                starredAgents.push(agentId);
                
                // 2. Increment the agent's total count
                agentStarCounts[agentId] = (agentStarCounts[agentId] || 0) + 1;
                
                // 3. Save both states
                saveState();
                
                // 4. Update the UI
                setCardAsStarred(card);
                updateStarCountDisplay(card, agentStarCounts[agentId], true); // Update count with animation
            }

            function setCardAsStarred(card) {
                const starButton = card.querySelector('.btn-star');
                const emailButton = card.querySelector('.btn-email');
                
                starButton.classList.add('starred-on-browse');
                starButton.disabled = true;
                starButton.querySelector('.material-icons-outlined').textContent = 'star';
                starButton.querySelector('.text').textContent = 'Starred';
                
                unlockEmailButton(emailButton);
            }
            
            function setCardAsUnstarred(card) {
                const starButton = card.querySelector('.btn-star');
                const emailButton = card.querySelector('.btn-email');

                starButton.classList.remove('starred-on-browse');
                starButton.disabled = false;
                starButton.querySelector('.material-icons-outlined').textContent = 'star_border';
                starButton.querySelector('.text').textContent = 'Star';
                
                lockEmailButton(emailButton);
            }

            // --- PIPELINE PAGE LOGIC ---
            function refreshPipelinePageUI() {
                pipelineGrid.innerHTML = ''; // Clear the grid
                
                if (starredAgents.length === 0) {
                    emptyPipelineMessage.style.display = 'block';
                    return;
                }
                
                emptyPipelineMessage.style.display = 'none';
                
                starredAgents.forEach(agentId => {
                    // Find the original card template from the browse grid
                    const originalCard = browseGrid.querySelector(`.agent-card[data-agent-id="${agentId}"]`);
                    if (originalCard) {
                        // Create the pipeline version of the card
                        const pipelineCard = createPipelineCard(originalCard, agentId);
                        pipelineGrid.appendChild(pipelineCard);
                    }
                });
            }
            
            function createPipelineCard(originalCard, agentId) {
                const card = originalCard.cloneNode(true);

                // Ensure the card display style is correct (it might be 'none' if filtered out on browse page)
                card.style.display = 'flex';
                
                // Ensure the star count displayed on the pipeline card matches the current state
                updateStarCountDisplay(card, agentStarCounts[agentId]);
                
                // Find and replace star button with unstar button
                const actionsContainer = card.querySelector('.card-actions');
                const starButton = actionsContainer.querySelector('.btn-star');
                
                const unstarButton = document.createElement('button');
                unstarButton.className = 'action-button btn-unstar';
                unstarButton.innerHTML = `
                    <span class="material-icons-outlined">close</span>
                    <span class="text">Remove</span>
                `;
                // In this simulation, removing from pipeline also revokes the star.
                unstarButton.addEventListener('click', () => unstarAgent(agentId));
                
                // Replace star button
                actionsContainer.replaceChild(unstarButton, starButton);
                
                // Unlock email button by default
                const emailButton = actionsContainer.querySelector('.btn-email');
                unlockEmailButton(emailButton);
                
                return card;
            }

            // When removing from pipeline (unstarring)
            function unstarAgent(agentId) {
                // 1. Update user's starred list
                const initialLength = starredAgents.length;
                starredAgents = starredAgents.filter(id => id !== agentId);
                
                // 2. Decrement the agent's total count (if the removal was successful)
                if (starredAgents.length < initialLength) {
                     // Decrement count, ensuring it doesn't go below zero
                     agentStarCounts[agentId] = Math.max(0, (agentStarCounts[agentId] || 0) - 1);
                }
                
                // 3. Save both states
                saveState();
                
                // 4. Re-render the pipeline page
                refreshPipelinePageUI(); 
            }
            
            // --- BUTTON UTILITIES ---
            function unlockEmailButton(emailButton) {
                const emailAddress = emailButton.dataset.email;
                const emailText = emailButton.querySelector('.text');
                const emailIcon = emailButton.querySelector('.material-icons-outlined');
                
                emailButton.classList.add('unlocked');
                emailText.textContent = emailAddress;
                if (emailIcon) emailIcon.remove();
            }

            function lockEmailButton(emailButton) {
                const emailText = emailButton.querySelector('.text');

                emailButton.classList.remove('unlocked');
                emailText.textContent = 'Email';
                
                // Ensure the lock icon is present
                if (!emailButton.querySelector('.material-icons-outlined')) {
                    emailButton.insertAdjacentHTML('afterbegin', '<span class="material-icons-outlined">lock</span>');
                }
            }
            
            // --- FILTERING LOGIC ---
            
            // Add event listeners
            filterSearchInput.addEventListener('input', filterAgents);
            filterYoeSelect.addEventListener('change', filterAgents);
            filterOpenToSelect.addEventListener('change', filterAgents);

            function filterAgents() {
                const searchTerm = filterSearchInput.value.toLowerCase();
                const yoeFilter = filterYoeSelect.value;
                const openToFilter = filterOpenToSelect.value;

                allAgentCards.forEach(card => {
                    const isVisible = 
                        matchesSearch(card, searchTerm) &&
                        matchesYOE(card, yoeFilter) &&
                        matchesOpenTo(card, openToFilter);
                    
                    // Use 'flex' as the base style for .agent-card
                    card.style.display = isVisible ? 'flex' : 'none';
                });
            }

            function matchesSearch(card, searchTerm) {
                if (!searchTerm) return true;
                
                const name = card.querySelector('h3').textContent.toLowerCase();
                const bioElement = card.querySelector('.card-body p:first-of-type');
                const bio = bioElement ? bioElement.textContent.toLowerCase() : '';
                const tags = Array.from(card.querySelectorAll('.tag')).map(t => t.textContent.toLowerCase()).join(' ');

                const searchableText = `${name} ${bio} ${tags}`;
                
                return searchableText.includes(searchTerm);
            }

            function matchesYOE(card, yoeFilter) {
                if (!yoeFilter) return true;

                const cardYOE = parseInt(card.dataset.yoe, 10);
                
                switch(yoeFilter) {
                    case '1-3':
                        return cardYOE >= 1 && cardYOE <= 3;
                    case '4-7':
                        return cardYOE >= 4 && cardYOE <= 7;
                    case '8+':
                        return cardYOE >= 8;
                    default:
                        return true;
                }
            }

            function matchesOpenTo(card, openToFilter) {
                if (!openToFilter) return true;
                
                // The JavaScript dataset API requires camelCase keys (e.g., card.dataset.openProvidingCandidates).
                const dataAttributeKey = `open${openToFilter.charAt(0).toUpperCase() + openToFilter.slice(1)}`;
                
                return card.dataset[dataAttributeKey] === 'true';
            }

            // --- INITIALIZATION ---
            initializeAgentData();
            showBrowsePage(); // Show browse page by default, which calls refreshBrowsePageUI
        });
    </script>

</body>
</html>